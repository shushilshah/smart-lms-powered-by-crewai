{% extends "dashboards/base.html" %}
{% block title %}My Courses{% endblock %}

{% block sidebar %}
<a href="{% url 'teacher_dashboard' %}">
  <i class="bi bi-speedometer2"></i> Dashboard
</a>
<a href="{% url 'create_course_teacher' %}">
  <i class="bi bi-journal-plus"></i> Create Course
</a>
<a href="{% url 'my_courses_teacher' %}" class="active">
  <i class="bi bi-folder"></i> My Courses
</a>
{% endblock %}

{% block content %}
{% if published_courses %}
  <h3 class='fw-bold mb-4'>Published Courses  <span class="badge bg-success">{{published_courses.count}}</span></h3>
  
  <div class="row g-4">
    {% for course in published_courses %}
      <div class="col-md-4">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <span class="badge bg-success mb-2">published</span>
            <h5 class="fw-bold">{{ course.title }}</h5>
            <p class="text-muted small">{{ course.description|truncatechars:80 }}</p>
            <a href="{% url 'course_detail_teacher' course.id %}" class="btn btn-primary">View Course
            </a>
            <a href="{% url 'edit_course_teacher' course.id %}" class="btn btn-danger">Edit Course

            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">No courses created yet.</p>
{% endif %}


<!-- ================= Pending / Draft Courses ================= -->
<h4 class="fw-bold mt-5 mb-3">
  Pending / Draft Courses
  <span class="badge bg-warning text-dark">{{ pending_courses.count }}</span>
</h4>

{% if pending_courses %}
<div class="row g-4">
  {% for course in pending_courses %}
  <div class="col-md-4">
    <div class="card shadow-sm h-100 border-warning">
      <div class="card-body">
        <span class="badge bg-warning text-dark mb-2">Pending</span>

        <h5 class="fw-bold">{{ course.title }}</h5>
        <p class="text-muted small">
          {{ course.description|default:"No description" |truncatechars:80 }}
        </p>

        <a href="{% url 'edit_course_teacher' course.id %}" class="btn btn-primary">
          Edit
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p class="text-muted">No pending courses ğŸ‰</p>
{% endif %}
{% endblock %}
